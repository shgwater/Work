---
title: 2020-07-10分析型数据仓库数据规范
tags: 新建,模板,小书匠
renderNumberedHeading: true
grammar_cjkRuby: true
---


欢迎使用 **{小书匠}(xiaoshujiang)编辑器**，您可以通过 `小书匠主按钮>模板` 里的模板管理来改变新建文章的内容。

# 度量规范

1. 对于null和“”不代表特殊含义的度量，将null和“”替换为0值。

# 维度规范

1. 如果需要通过判断编码对维度进行说明或者分箱的情况，判断一定要遍历所有可能的情况，除此之外的else里写其他或未知，相当于一种错误的抛出。


# 其他

## 去重指标

1. 布隆过滤器  该算法是位数组算法的应用 不保存真实的明细数据，只保存明细数据对应哈希值的标记位。当然，会出现哈希值碰撞的情况，但是误差率可以控制，计算出来的去重值比真实值小。采用这个算法存储 亿条数据只需要 100 MB 空间。适用场景 统计精度要求不高，统计维度值非常多的情况。比如统计全网各个商家的 UV 数据，结果记录数达到上千万条。因为在各个维度之间，布隆过滤器是可以共用的。
2. 基数估计  该算法也是利用哈希的原理，按照数据的分散程度来估算现有数集的边界，从而得出大概的去重值总和。这里估算的去重值可能比真实值大，也可能比真实值小。采用这个算法存储 亿条数据只需要几 KB内存。适用场景：统计精度要求不高，统计维度非常粗的情况。比如整个大盘的 UV 数据，每天的结果只有一条记录。基数估计在各个维度值之间不能共用，比如统计全天小时的 UV 数据，就需要有14 个基数估计对象，因此不适合细粒度统计的场景。
